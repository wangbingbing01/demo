下面示例展示：如何测试“无返回值(void)”方法——通过观察其 副作用：内部状态变化、回调调用次数 / 参数、抛出的异常、异步完成后的状态。
核心思路：不用看返回值，而是 1) 事前记录状态 2) 调用 void 方法 3) 断言状态 / 监听器 / 异常。

代码要点

通过 getter 暴露受控可观测状态 (size)
使用数组收集回调副作用
通过捕获函数断言抛错 (expect(fn).assertThrowError / 或断言 message)
异步 void：方法自身不返回 Promise；测试里包一层 Promise，等待内部 setTimeout 后再断言




说明补充

针对 void 方法：不要尝试比较返回值，聚焦其引发的状态或交互。
若需要验证与外部协作（例如调用外部依赖），可用 Mock（或手写假的监听器）收集调用次数与参数。
异步 void：测试端包一层 Promise / await，等待副作用完成后再断言。
